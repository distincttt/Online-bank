(()=>{"use strict";var e={2979(e,t,n){n(8665),n(9193),n(9218),n(3396);var r=n(3751),u=n(641);function a(e,t,n,r,a,o){return r.layout?((0,u.uX)(),(0,u.Wv)((0,u.$y)(r.layout+"-layout"),{key:0})):(0,u.Q3)("",!0)}var o=n(6166),s={class:"container"};function i(e,t,n,r,a,o){var i=(0,u.g2)("app-message"),l=(0,u.g2)("router-view");return(0,u.uX)(),(0,u.CE)("div",s,[(0,u.bF)(i),(0,u.bF)(l)])}var l=n(33),c={key:0,class:"alert-title"};function p(e,t,n,r,a,o){return e.message?((0,u.uX)(),(0,u.CE)("div",{key:0,class:(0,l.C4)(["alert",e.message.type])},[e.title?((0,u.uX)(),(0,u.CE)("p",c,(0,l.v_)(e.title),1)):(0,u.Q3)("",!0),(0,u.Lk)("p",null,(0,l.v_)(e.message.value),1),(0,u.Lk)("span",{class:"alert-close",onClick:t[0]||(t[0]=function(){return e.close&&e.close.apply(e,arguments)})},"×")],2)):(0,u.Q3)("",!0)}var d=n(6872);function v(){return(0,d.Pj)()}const m=(0,u.pM)({setup:function(){var e=v(),t=(0,u.EW)(function(){return e.state.message}),n={danger:"Ошибка!",primary:"Успешно!",warning:"Внимание!"},r=(0,u.EW)(function(){return t.value?n[t.value.type]:""});return{message:t,title:r,close:function(){return e.commit("clearMessage")}}}});var f=n(6262);const g=(0,f.A)(m,[["render",p]]),k=g,h={components:{AppMessage:k}},b=(0,f.A)(h,[["render",i]]),y=b;var A={class:"container with-nav"};function L(e,t,n,r,a,o){var s=(0,u.g2)("the-navbar"),i=(0,u.g2)("the-sidebar"),l=(0,u.g2)("app-message"),c=(0,u.g2)("router-view");return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.bF)(s),(0,u.bF)(i),(0,u.Lk)("div",A,[(0,u.bF)(l),(0,u.bF)(c)])],64)}var E={class:"navbar"},q={class:"navbar-menu"};function w(e,t,n,a,o,s){var i=(0,u.g2)("router-link");return(0,u.uX)(),(0,u.CE)("nav",E,[t[4]||(t[4]=(0,u.Lk)("h3",null,"Online Bank",-1)),(0,u.Lk)("ul",q,[(0,u.Lk)("li",null,[(0,u.bF)(i,{to:"/"},{default:(0,u.k6)(function(){return t[2]||(t[2]=[(0,u.eW)("Заявки")])}),_:1})]),(0,u.Lk)("li",null,[(0,u.bF)(i,{to:"/help"},{default:(0,u.k6)(function(){return t[3]||(t[3]=[(0,u.eW)("Помощь")])}),_:1})]),(0,u.Lk)("li",null,[(0,u.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,r.D$)(function(){return e.openSidebar&&e.openSidebar.apply(e,arguments)},["prevent"]))},"Сообщение")]),(0,u.Lk)("li",null,[(0,u.Lk)("a",{href:"#",onClick:t[1]||(t[1]=(0,r.D$)(function(){return e.logout&&e.logout.apply(e,arguments)},["prevent"]))},"Выход")])])])}const M=(0,u.pM)({setup:function(){var e=(0,o.rd)(),t=v();return{logout:function(){t.commit("authModule/logout"),e.push("/registration")},openSidebar:function(){return t.commit("openSidebar")}}}}),C=(0,f.A)(M,[["render",w]]),S=C;var X={key:0,class:"sidebar"};function _(e,t,n,r,a,o){return e.sidebar?((0,u.uX)(),(0,u.CE)("div",X,[(0,u.Lk)("span",{class:"sidebar-close",onClick:t[0]||(t[0]=function(){return e.close&&e.close.apply(e,arguments)})},"×"),t[1]||(t[1]=(0,u.Lk)("div",{class:"sidebar-content"},[(0,u.Lk)("p",{class:"sidebar-content-text"}," Добро пожаловать в систему по учету заявок в нашем банке. Здесь вы найдете исчерпывающую информацию про систему и заявки ")],-1))])):(0,u.Q3)("",!0)}const R=(0,u.pM)({setup:function(){var e=v(),t=(0,u.EW)(function(){return e.state.sidebar}),n=function(){return e.commit("closeSidebar")};return{sidebar:t,close:n}}}),B=(0,f.A)(R,[["render",_]]),W=B,F={components:{TheNavbar:S,AppMessage:k,TheSidebar:W}},x=(0,f.A)(F,[["render",L]]),T=x,j={setup:function(){var e=(0,o.lq)();return{layout:(0,u.EW)(function(){return e.meta.layout})}},components:{MainLayout:T,AuthLayout:y}},O=(0,f.A)(j,[["render",a]]),V=O;var I=n(3723);(0,I.k)("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n(17),n(5086),n(3725),n(5019);function K(e,t,n,r,a,o){var s=(0,u.g2)("app-loader"),i=(0,u.g2)("request-filter"),l=(0,u.g2)("request-table"),c=(0,u.g2)("request-modal"),p=(0,u.g2)("app-modal"),d=(0,u.g2)("app-page");return e.loading?((0,u.uX)(),(0,u.Wv)(s,{key:0})):((0,u.uX)(),(0,u.Wv)(d,{key:1,title:"Список заявок"},{header:(0,u.k6)(function(){return[(0,u.Lk)("button",{class:"btn primary",onClick:t[0]||(t[0]=function(t){return e.modal=!0})},"Создать")]}),default:(0,u.k6)(function(){return[(0,u.bF)(i,{modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter=t})},null,8,["modelValue"]),(0,u.bF)(l,{requests:e.requests},null,8,["requests"]),((0,u.uX)(),(0,u.Wv)(u.Im,{to:"body"},[e.modal?((0,u.uX)(),(0,u.Wv)(p,{key:0,title:"Создать заявку",onClose:t[3]||(t[3]=function(t){return e.modal=!1})},{default:(0,u.k6)(function(){return[(0,u.bF)(c,{onCreated:t[2]||(t[2]=function(t){return e.modal=!1})})]}),_:1})):(0,u.Q3)("",!0),t[4]||(t[4]=(0,u.eW)(" >"))]))]}),_:1}))}var Q=n(908),U=n(388),N=(n(7746),n(8741),n(3148),n(953)),$={key:0,class:"text-center"},D={key:1,class:"table"},P=["onClick"];function H(e,t,n,r,a,o){var s=(0,u.g2)("app-status"),i=(0,u.g2)("router-link");return 0===e.requests.length?((0,u.uX)(),(0,u.CE)("h4",$,"Заявок пока нет")):((0,u.uX)(),(0,u.CE)("table",D,[t[0]||(t[0]=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"#"),(0,u.Lk)("th",null,"ФИО"),(0,u.Lk)("th",null,"Телефон"),(0,u.Lk)("th",null,"Сумма"),(0,u.Lk)("th",null,"Статус"),(0,u.Lk)("th",null,"Действие")])],-1)),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.requests,function(t,n){return(0,u.uX)(),(0,u.CE)("tr",{key:t.id},[(0,u.Lk)("td",null,(0,l.v_)(n+1),1),(0,u.Lk)("td",null,(0,l.v_)(t.name),1),(0,u.Lk)("td",null,(0,l.v_)(t.tel),1),(0,u.Lk)("td",null,(0,l.v_)(e.currency(t.sum)),1),(0,u.Lk)("td",null,[(0,u.bF)(s,{type:t.status},null,8,["type"])]),(0,u.Lk)("td",null,[(0,u.bF)(i,{custom:"",to:{name:"Request",params:{id:t.id}}},{default:(0,u.k6)(function(e){var t=e.navigate;return[(0,u.Lk)("button",{class:"btn",onClick:t},"Открыть",8,P)]}),_:2},1032,["to"])])])}),128))])]))}function G(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e)}function J(e,t,n,r,a,o){return(0,u.uX)(),(0,u.CE)("span",{class:(0,l.C4)(["badge",e.className])},(0,l.v_)(e.text),3)}const Y=(0,u.pM)({name:"AppStatus",props:{type:{type:String,required:!0,validator:function(e){return["active","cancelled","done","pending"].includes(e)}}},setup:function(e){var t={active:"primary",cancelled:"danger",done:"primary",pending:"warning"},n={active:"Активен",cancelled:"Отменен",done:"Завершен",pending:"Выполняется"},r=(0,N.KR)(t[e.type]),a=(0,N.KR)(n[e.type]);return(0,u.wB)(function(){return e.type},function(e){r.value=t[e],a.value=n[e]}),{className:r,text:a}}}),z=(0,f.A)(Y,[["render",J]]),Z=z,ee=(0,u.pM)({name:"RequestTable",components:{AppStatus:Z},props:{requests:{type:Array,required:!0}},setup:function(){return{currency:G}}}),te=(0,f.A)(ee,[["render",H]]),ne=te;var re={key:0,class:"breadcrumbs"},ue={class:"card"},ae={class:"card-title"};function oe(e,t,n,r,a,o){var s=(0,u.g2)("router-link");return(0,u.uX)(),(0,u.CE)(u.FK,null,[n.back?((0,u.uX)(),(0,u.CE)("div",re,[(0,u.bF)(s,{to:"/",class:"text-white"},{default:(0,u.k6)(function(){return t[0]||(t[0]=[(0,u.eW)("Назад")])}),_:1})])):(0,u.Q3)("",!0),(0,u.Lk)("div",ue,[(0,u.Lk)("h1",ae,[(0,u.eW)((0,l.v_)(n.title),1),(0,u.RG)(e.$slots,"header")]),(0,u.RG)(e.$slots,"default")])],64)}const se={props:{title:{type:String,required:!0},back:{type:Boolean,default:!1}},setup:function(e){(0,u.sV)(function(){document.title="".concat(e.title," | Клон Банка")})}},ie=(0,f.A)(se,[["render",oe]]),le=ie;var ce={class:"modal"},pe={key:0};function de(e,t,n,r,a,o){return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.Lk)("div",{class:"modal-backdrop",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})}),(0,u.Lk)("div",ce,[n.title?((0,u.uX)(),(0,u.CE)("h3",pe,(0,l.v_)(n.title),1)):(0,u.Q3)("",!0),(0,u.RG)(e.$slots,"default")])],64)}const ve={emits:["close"],props:{title:{type:String}}},me=(0,f.A)(ve,[["render",de]]),fe=me;var ge={key:0},ke={key:0},he={key:0},be={class:"form-control"},ye=["disabled"],Ae={key:0,class:"text-danger"};function Le(e,t,n,a,o,s){return(0,u.uX)(),(0,u.CE)("form",{onSubmit:t[7]||(t[7]=(0,r.D$)(function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)},["prevent"]))},[(0,u.Lk)("div",{class:(0,l.C4)(["form-control",{invalid:e.nameError}])},[t[8]||(t[8]=(0,u.Lk)("label",{for:"name"},"ФИО",-1)),(0,u.bo)((0,u.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),onBlur:t[1]||(t[1]=function(){return e.nameBlur&&e.nameBlur.apply(e,arguments)})},null,544),[[r.Jo,e.name]]),e.nameError?((0,u.uX)(),(0,u.CE)("small",ge,(0,l.v_)(e.nameError),1)):(0,u.Q3)("",!0)],2),(0,u.Lk)("div",{class:(0,l.C4)(["form-control",{invalid:e.telError}])},[t[9]||(t[9]=(0,u.Lk)("label",{for:"tel"}," Телефон",-1)),(0,u.bo)((0,u.Lk)("input",{type:"tel",id:"tel","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.tel=t}),onBlur:t[3]||(t[3]=function(){return e.telBlur&&e.telBlur.apply(e,arguments)})},null,544),[[r.Jo,e.tel]]),e.telError?((0,u.uX)(),(0,u.CE)("small",ke,(0,l.v_)(e.telError),1)):(0,u.Q3)("",!0)],2),(0,u.Lk)("div",{class:(0,l.C4)(["form-control",{invalid:e.sumError}])},[t[10]||(t[10]=(0,u.Lk)("label",{for:"sum"},"Сумма",-1)),(0,u.bo)((0,u.Lk)("input",{type:"number",id:"sum","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.sum=t}),onBlur:t[5]||(t[5]=function(){return e.sumBlur&&e.sumBlur.apply(e,arguments)})},null,544),[[r.Jo,e.sum,void 0,{number:!0}]]),e.sumError?((0,u.uX)(),(0,u.CE)("small",he,(0,l.v_)(e.sumError),1)):(0,u.Q3)("",!0)],2),(0,u.Lk)("div",be,[t[12]||(t[12]=(0,u.Lk)("label",{for:"status"},"Статус",-1)),(0,u.bo)((0,u.Lk)("select",{id:"status","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.status=t})},t[11]||(t[11]=[(0,u.Lk)("option",{value:"pending"},"Выполняется",-1),(0,u.Lk)("option",{value:"active"},"Активен",-1),(0,u.Lk)("option",{value:"cancelled"},"Отменен",-1),(0,u.Lk)("option",{value:"done"},"Завершён",-1)]),512),[[r.u1,e.status]])]),(0,u.Lk)("button",{class:"btn primary",type:"submit",disabled:e.isSubmitting||e.isTooManyAttempts}," Создать заявку ",8,ye),e.isTooManyAttempts?((0,u.uX)(),(0,u.CE)("div",Ae," Вы превысили количество попыток входа. Попробуйте позже. ")):(0,u.Q3)("",!0)],32)}var Ee=n(8788),qe=(n(8329),n(8772),n(861)),we=n(1268);function Me(e){var t=(0,we.mN)({initialValues:{status:"active"}}),n=t.handleSubmit,r=t.isSubmitting,a=t.submitCount,o=(0,we.Mt)("name",qe.Yj().required("ФИО обязательно")),s=o.value,i=o.errorMessage,l=o.handleBlur,c=(0,we.Mt)("sum",qe.ai().required("Сумма обязательна").min(0,"Минимальная сумма 0 рублей")),p=c.value,d=c.errorMessage,v=c.handleBlur,m=(0,we.Mt)("tel",qe.Yj().trim().required("Телефон обязателен")),f=m.value,g=m.errorMessage,k=m.handleBlur,h=(0,we.Mt)("status"),b=h.value,y=(0,u.EW)(function(){return a.value>=3});(0,u.wB)(y,function(e){e&&setTimeout(function(){a.value=0},3e3)});var A=n(e);return{name:s,nameError:i,nameBlur:l,sum:p,sumError:d,sumBlur:v,tel:f,telError:g,telBlur:k,status:b,onSubmit:A,isSubmitting:r,isTooManyAttempts:y}}const Ce=(0,u.pM)({emits:["created"],setup:function(e,t){var n=t.emit,r=v(),u=function(){var e=(0,U.A)((0,Q.A)().m(function e(t){return(0,Q.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,r.dispatch("requestModule/createRequest",t);case 1:n("created");case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return(0,Ee.A)({},Me(u))}}),Se=(0,f.A)(Ce,[["render",Le]]),Xe=Se;var _e={class:"loader"};function Re(e,t){return(0,u.uX)(),(0,u.CE)("div",_e)}const Be={},We=(0,f.A)(Be,[["render",Re]]),Fe=We;var xe={class:"filter"},Te={class:"form-control"},je={class:"form-control"};function Oe(e,t,n,a,o,s){return(0,u.uX)(),(0,u.CE)("div",xe,[(0,u.Lk)("div",Te,[(0,u.bo)((0,u.Lk)("input",{type:"text",placeholder:"Начните писать имя","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t})},null,512),[[r.Jo,e.name]])]),(0,u.Lk)("div",je,[(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.status=t})},t[3]||(t[3]=[(0,u.Fv)('<option disabled selected>Выберите статус</option><option value="done">Завершен</option><option value="cancelled">Отменен</option><option value="active">Активен</option><option value="pending">Выполняется</option>',5)]),512),[[r.u1,e.status]])]),e.isActive?((0,u.uX)(),(0,u.CE)("button",{key:0,class:"btn warning",onClick:t[2]||(t[2]=function(){return e.reset&&e.reset.apply(e,arguments)})},"Очистить")):(0,u.Q3)("",!0)])}var Ve=n(3644);const Ie=(0,u.pM)({props:{modelValue:{type:Object,default:function(){return{}}}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=e.modelValue,a=r.name,o=void 0===a?"":a,s=r.status,i=(0,N.KR)(o),l=(0,N.KR)(s);(0,u.wB)([i,l],function(e){var t=(0,Ve.A)(e,2),r=t[0],u=t[1];n("update:modelValue",{name:r,status:u})});var c=(0,u.EW)(function(){return!!i.value||!!l.value}),p=function(){i.value="",l.value=void 0};return{name:i,status:l,isActive:c,reset:p}}}),Ke=(0,f.A)(Ie,[["render",Oe]]),Qe=Ke,Ue=(0,u.pM)({components:{AppPage:le,RequestTable:ne,AppModal:fe,RequestModal:Xe,AppLoader:Fe,RequestFilter:Qe},setup:function(){var e=(0,N.KR)(!1),t=(0,N.KR)(!1),n=(0,N.KR)({}),r=v();(0,u.sV)((0,U.A)((0,Q.A)().m(function e(){return(0,Q.A)().w(function(e){while(1)switch(e.n){case 0:return t.value=!0,e.n=1,r.dispatch("requestModule/fetchRequests");case 1:t.value=!1;case 2:return e.a(2)}},e)})));var a=(0,u.EW)(function(){var e=r.getters["requestModule/requests"];return e.filter(function(e){return!n.value.name||e.name.includes(n.value.name)}).filter(function(e){return!n.value.status||e.status===n.value.status})});return{modal:e,requests:a,loading:t,filter:n}}}),Ne=(0,f.A)(Ue,[["render",K]]),$e=Ne;function De(e,t,n,r,a,o){var s=(0,u.g2)("question-item"),i=(0,u.g2)("app-page");return(0,u.uX)(),(0,u.Wv)(i,{back:"",title:"Помощь"},{default:(0,u.k6)(function(){return[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.questions,function(e){return(0,u.uX)(),(0,u.Wv)(s,{key:e.title,question:e},null,8,["question"])}),128))]}),_:1})}var Pe={class:"question-title"},He={key:0,class:"question-body"};function Ge(e,t,n,r,a,o){return(0,u.uX)(),(0,u.CE)("div",{class:"question",onClick:t[0]||(t[0]=function(t){return e.isOpen=!e.isOpen})},[(0,u.Lk)("div",Pe,(0,l.v_)(e.question.title),1),e.isOpen?((0,u.uX)(),(0,u.CE)("div",He,(0,l.v_)(e.question.text),1)):(0,u.Q3)("",!0)])}const Je=(0,u.pM)({props:{question:{type:Object,required:!0}},setup:function(){var e=(0,N.KR)(!1);return{isOpen:e}}}),Ye=(0,f.A)(Je,[["render",Ge]]),ze=Ye,Ze=(0,u.pM)({components:{AppPage:le,QuestionItem:ze},setup:function(){var e=[{title:"Что есть в данной системе?",text:"Тут есть все, для того, чтобы смотреть, какие заявки человек добавлял"},{title:"Как тут работает авторизация?",text:"Все реализовано через Firebase"}];return{questions:e}}}),et=(0,f.A)(Ze,[["render",De]]),tt=et;function nt(e,t,n,r,a,o){var s=(0,u.g2)("auth-form");return(0,u.uX)(),(0,u.Wv)(s,{mode:"login",title:"Войти в систему","submit-text":"Войти","limit-text":"Вы превысили количество попыток входа. Попробуйте позже."})}var rt={key:0},ut={key:0},at=["disabled"],ot={key:0,class:"text-danger"};function st(e,t,n,a,o,s){return(0,u.uX)(),(0,u.CE)("form",{class:"card",onSubmit:t[4]||(t[4]=(0,r.D$)(function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)},["prevent"]))},[(0,u.Lk)("h1",null,(0,l.v_)(n.title),1),(0,u.Lk)("div",{class:(0,l.C4)(["form-control",{invalid:e.eError}])},[t[5]||(t[5]=(0,u.Lk)("label",null,"Email",-1)),(0,u.bo)((0,u.Lk)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),onBlur:t[1]||(t[1]=function(){return e.eBlur&&e.eBlur.apply(e,arguments)})},null,544),[[r.Jo,e.email]]),e.eError?((0,u.uX)(),(0,u.CE)("small",rt,(0,l.v_)(e.eError),1)):(0,u.Q3)("",!0)],2),(0,u.Lk)("div",{class:(0,l.C4)(["form-control",{invalid:e.pError}])},[t[6]||(t[6]=(0,u.Lk)("label",null,"Пароль",-1)),(0,u.bo)((0,u.Lk)("input",{type:"password",placeholder:"Пароль","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),onBlur:t[3]||(t[3]=function(){return e.pBlur&&e.pBlur.apply(e,arguments)})},null,544),[[r.Jo,e.password]]),e.pError?((0,u.uX)(),(0,u.CE)("small",ut,(0,l.v_)(e.pError),1)):(0,u.Q3)("",!0)],2),(0,u.Lk)("button",{class:"btn primary",type:"submit",disabled:e.isSubmitting||e.isTooManyAttempts},(0,l.v_)(n.submitText),9,at),(0,u.RG)(e.$slots,"default"),e.isTooManyAttempts?((0,u.uX)(),(0,u.CE)("div",ot,(0,l.v_)(n.limitText),1)):(0,u.Q3)("",!0)],32)}var it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=(0,d.Pj)(),n=(0,o.rd)(),r=(0,we.mN)(),a=r.handleSubmit,s=r.isSubmitting,i=r.submitCount,l=(0,we.Mt)("email",qe.Yj().required("Email обязателен").email("Введите корректный email")),c=l.value,p=l.errorMessage,v=l.handleBlur,m=6,f=(0,we.Mt)("password",qe.Yj().required("Пароль обязателен").min(m,"Минимум ".concat(m," символов"))),g=f.value,k=f.errorMessage,h=f.handleBlur,b=(0,u.EW)(function(){return i.value>=3});(0,u.wB)(b,function(e){e&&setTimeout(function(){i.value=0},3e3)});var y=a(function(){var r=(0,U.A)((0,Q.A)().m(function r(u){return(0,Q.A)().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,t.dispatch("authModule/".concat(e),u);case 1:n.push("/"),r.n=3;break;case 2:r.p=2,r.v;case 3:return r.a(2)}},r,null,[[0,2]])}));return function(e){return r.apply(this,arguments)}}());return{email:c,eError:p,eBlur:v,password:g,pError:k,pBlur:h,onSubmit:y,isSubmitting:s,isTooManyAttempts:b}};const lt={props:{title:String,submitText:String,limitText:String,mode:{type:String,required:!0,validator:function(e){return["login","registration"].includes(e)}}},setup:function(e){return(0,Ee.A)({},it(e.mode))}},ct=(0,f.A)(lt,[["render",st]]),pt=ct,dt={components:{AuthForm:pt}},vt=(0,f.A)(dt,[["render",nt]]),mt=vt;var ft={class:"form-control"},gt={key:2,class:"text-center text-white"};function kt(e,t,n,a,o,s){var i=(0,u.g2)("app-loader"),c=(0,u.g2)("app-status"),p=(0,u.g2)("app-page");return a.loading?((0,u.uX)(),(0,u.Wv)(i,{key:0})):a.request?((0,u.uX)(),(0,u.Wv)(p,{key:1,back:"",title:"Заявка"},{default:(0,u.k6)(function(){return[(0,u.Lk)("p",null,[t[3]||(t[3]=(0,u.Lk)("strong",null,"Имя владельца",-1)),(0,u.eW)(": "+(0,l.v_)(a.request.name),1)]),(0,u.Lk)("p",null,[t[4]||(t[4]=(0,u.Lk)("strong",null,"Телефон",-1)),(0,u.eW)(": "+(0,l.v_)(a.request.tel),1)]),(0,u.Lk)("p",null,[t[5]||(t[5]=(0,u.Lk)("strong",null,"Сумма",-1)),(0,u.eW)(": "+(0,l.v_)(a.currency(a.request.sum)),1)]),(0,u.Lk)("p",null,[t[6]||(t[6]=(0,u.Lk)("strong",null,"Статус",-1)),t[7]||(t[7]=(0,u.eW)(": ")),(0,u.bF)(c,{type:a.request.status},null,8,["type"])]),(0,u.Lk)("div",ft,[t[9]||(t[9]=(0,u.Lk)("label",{for:"status"},"Статус",-1)),(0,u.bo)((0,u.Lk)("select",{id:"status","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.status=e})},t[8]||(t[8]=[(0,u.Lk)("option",{value:"done"},"Завершен",-1),(0,u.Lk)("option",{value:"cancelled"},"Отменен",-1),(0,u.Lk)("option",{value:"active"},"Активен",-1),(0,u.Lk)("option",{value:"pending"},"Выполняется",-1)]),512),[[r.u1,a.status]])]),(0,u.Lk)("button",{class:"btn danger",onClick:t[1]||(t[1]=function(){return a.remove&&a.remove.apply(a,arguments)})},"Удалить"),a.hasChanges?((0,u.uX)(),(0,u.CE)("button",{key:0,class:"btn",onClick:t[2]||(t[2]=function(){return a.update&&a.update.apply(a,arguments)})},"Обновить")):(0,u.Q3)("",!0)]}),_:1})):((0,u.uX)(),(0,u.CE)("h3",gt,"Заявки с ID = "+(0,l.v_)(e.$route.params.id)+" нет.",1))}const ht={components:{AppPage:le,AppLoader:Fe,AppStatus:Z},setup:function(){var e=(0,o.lq)(),t=(0,o.rd)(),n=v(),r=(0,N.KR)(void 0),a=(0,N.KR)(!0),s=(0,N.KR)(null);(0,u.sV)((0,U.A)((0,Q.A)().m(function t(){var u,o;return(0,Q.A)().w(function(t){while(1)switch(t.n){case 0:return a.value=!0,o=e.params.id,t.n=1,n.dispatch("requestModule/fetchRequestById",o);case 1:s.value=t.v,r.value=null===(u=s.value)||void 0===u?void 0:u.status,a.value=!1;case 2:return t.a(2)}},t)})));var i=(0,u.EW)(function(){var e;return(null===(e=s.value)||void 0===e?void 0:e.status)!==r.value}),l=function(){var r=(0,U.A)((0,Q.A)().m(function r(){var u;return(0,Q.A)().w(function(r){while(1)switch(r.n){case 0:return u=e.params.id,r.n=1,n.dispatch("requestModule/remove",u);case 1:t.push("/");case 2:return r.a(2)}},r)}));return function(){return r.apply(this,arguments)}}(),c=function(){var t=(0,U.A)((0,Q.A)().m(function t(){var u,a,o;return(0,Q.A)().w(function(t){while(1)switch(t.n){case 0:if(s.value){t.n=1;break}return t.a(2);case 1:return a=e.params.id,o=(0,Ee.A)((0,Ee.A)({},s.value),{},{status:null!==(u=r.value)&&void 0!==u?u:"active",id:a}),t.n=2,n.dispatch("requestModule/update",o);case 2:s.value.status=r.value;case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return{loading:a,request:s,currency:G,remove:l,update:c,status:r,hasChanges:i}}},bt=(0,f.A)(ht,[["render",kt]]),yt=bt;function At(e,t,n,r,a,o){var s=(0,u.g2)("router-link"),i=(0,u.g2)("auth-form");return(0,u.uX)(),(0,u.Wv)(i,{mode:"registration",title:"Создать аккаунт","submit-text":"Создать аккаунт","limit-text":"Вы превысили количество попыток регистрации. Попробуйте позже."},{default:(0,u.k6)(function(){return[(0,u.Lk)("p",null,[t[1]||(t[1]=(0,u.eW)(" Уже есть аккаунт? ")),(0,u.bF)(s,{to:"/auth"},{default:(0,u.k6)(function(){return t[0]||(t[0]=[(0,u.eW)("Войти")])}),_:1})])]}),_:1})}var Lt={INVALID_LOGIN_CREDENTIALS:"Неверный логин или пароль.",auth:"Пожалуйста, авторизуйтесь."};function Et(e){return Lt[e]||"Неизвестная ошибка"}const qt=(0,u.pM)({components:{AuthForm:pt},setup:function(){var e=(0,o.lq)(),t=v(),n=e.query.message;n&&t.dispatch("setMessage",{value:Et(n),type:"warning"},{root:!0})}}),wt=(0,f.A)(qt,[["render",At]]),Mt=wt;var Ct=n(2505),St=n.n(Ct),Xt="jwt-token",_t={namespaced:!0,state:function(){return{token:localStorage.getItem(Xt)}},getters:{token:function(e){return e.token},isAuthenticated:function(e){return!!e.token}},mutations:{setToken:function(e,t){e.token=t,localStorage.setItem(Xt,t)},logout:function(e){e.token=null,localStorage.removeItem(Xt)}},actions:{registration:function(e,t){return(0,U.A)((0,Q.A)().m(function n(){var r,u,a,o,s,i,l,c,p,d,v;return(0,Q.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.commit,u=e.dispatch,n.p=1,i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat("AIzaSyC0eDHmEKxsEptG2D-5ssyaYliuUNjy-LE"),n.n=2,St().post(i,(0,Ee.A)((0,Ee.A)({},t),{},{returnSecureToken:!0}));case 2:l=n.v,c=l.data,r("setToken",c.idToken),r("clearMessage",null,{root:!0}),n.n=4;break;case 3:throw n.p=3,v=n.v,p=v,d=null===(s=null===(o=null===(a=p.response)||void 0===a?void 0:a.data)||void 0===o?void 0:o.error)||void 0===s?void 0:s.message,d&&u("setMessage",{value:Et(d),type:"danger"},{root:!0}),new Error;case 4:return n.a(2)}},n,null,[[1,3]])}))()},login:function(e,t){return(0,U.A)((0,Q.A)().m(function n(){var r,u,a,o,s,i,l,c,p,d,v;return(0,Q.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.commit,u=e.dispatch,n.p=1,i="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyC0eDHmEKxsEptG2D-5ssyaYliuUNjy-LE"),n.n=2,St().post(i,(0,Ee.A)((0,Ee.A)({},t),{},{returnSecureToken:!0}));case 2:l=n.v,c=l.data,r("setToken",c.idToken),r("clearMessage",null,{root:!0}),n.n=4;break;case 3:throw n.p=3,v=n.v,p=v,d=null===(s=null===(o=null===(a=p.response)||void 0===a?void 0:a.data)||void 0===o?void 0:o.error)||void 0===s?void 0:s.message,d&&u("setMessage",{value:Et(d),type:"danger"},{root:!0}),new Error;case 4:return n.a(2)}},n,null,[[1,3]])}))()}}};const Rt=_t;n(115),n(9581),n(7899),n(1339);var Bt=St().create({baseURL:"https://vue-online-bank-c3fdd-default-rtdb.asia-southeast1.firebasedatabase.app/"});Bt.interceptors.response.use(void 0,function(e){var t,n=null===(t=e.response)||void 0===t?void 0:t.status;return 401===n&&Ut.push("/registration?message=auth"),Promise.reject(e)});const Wt=Bt;var Ft={namespaced:!0,state:function(){return{requests:[]}},getters:{requests:function(e){return e.requests}},mutations:{setRequests:function(e,t){e.requests=t},addRequest:function(e,t){e.requests.push(t)}},actions:{createRequest:function(e,t){return(0,U.A)((0,Q.A)().m(function n(){var r,u,a,o,s,i,l;return(0,Q.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.commit,u=e.dispatch,n.p=1,a=Vt.getters["authModule/token"],n.n=2,Wt.post("/requests.json?auth=".concat(a),t);case 2:o=n.v,s=o.data,r("addRequest",(0,Ee.A)((0,Ee.A)({},t),{},{id:s.name})),u("setMessage",{value:"Заявка успешно создана",type:"primary"},{root:!0}),n.n=4;break;case 3:n.p=3,l=n.v,i=l,u("setMessage",{value:i.message,type:"danger"},{root:!0});case 4:return n.a(2)}},n,null,[[1,3]])}))()},fetchRequests:function(e){return(0,U.A)((0,Q.A)().m(function t(){var n,r,u,a,o,s,i,l;return(0,Q.A)().w(function(t){while(1)switch(t.p=t.n){case 0:return n=e.commit,r=e.dispatch,t.p=1,u=Vt.getters["authModule/token"],t.n=2,Wt.get("/requests.json?auth=".concat(u));case 2:a=t.v,o=a.data,s=o?Object.keys(o).map(function(e){return(0,Ee.A)((0,Ee.A)({},o[e]),{},{id:e})}):[],n("setRequests",s),t.n=4;break;case 3:t.p=3,l=t.v,i=l,r("setMessage",{value:i.message,type:"danger"},{root:!0});case 4:return t.a(2)}},t,null,[[1,3]])}))()},fetchRequestById:function(e,t){return(0,U.A)((0,Q.A)().m(function e(){var n,r,u,a,o;return(0,Q.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,n=Vt.getters["authModule/token"],e.n=1,Wt.get("/requests/".concat(t,".json?auth=").concat(n));case 1:return r=e.v,u=r.data,e.a(2,(0,Ee.A)((0,Ee.A)({},u),{},{id:t}));case 2:e.p=2,o=e.v,a=o,Vt.dispatch("setMessage",{value:a.message,type:"danger"},{root:!0});case 3:return e.a(2)}},e,null,[[0,2]])}))()},update:function(e,t){return(0,U.A)((0,Q.A)().m(function n(){var r,u,a,o;return(0,Q.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.dispatch,n.p=1,u=Vt.getters["authModule/token"],n.n=2,Wt.put("/requests/".concat(t.id,".json?auth=").concat(u),t);case 2:r("setMessage",{value:"Заявка успешно обновлена",type:"primary"},{root:!0}),n.n=4;break;case 3:n.p=3,o=n.v,a=o,r("setMessage",{value:a.message,type:"danger"},{root:!0});case 4:return n.a(2)}},n,null,[[1,3]])}))()},remove:function(e,t){return(0,U.A)((0,Q.A)().m(function n(){var r,u,a,o;return(0,Q.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.dispatch,n.p=1,u=Vt.getters["authModule/token"],n.n=2,Wt["delete"]("/requests/".concat(t,".json?auth=").concat(u));case 2:r("setMessage",{value:"Заявка успешно удалена",type:"primary"},{root:!0}),n.n=4;break;case 3:n.p=3,o=n.v,a=o,r("setMessage",{value:a.message,type:"danger"},{root:!0});case 4:return n.a(2)}},n,null,[[1,3]])}))()}}};const xt=Ft;var Tt=[];var jt={setMessage:function(e,t){e.message=t},clearMessage:function(e){e.message=null},openSidebar:function(e){e.sidebar=!0},closeSidebar:function(e){e.sidebar=!1}},Ot={setMessage:function(e,t){var n=e.commit;n("setMessage",t),setTimeout(function(){n("clearMessage")},5e3)}};const Vt=(0,d.y$)({plugins:Tt,state:function(){return{message:null,sidebar:!1}},mutations:jt,actions:Ot,modules:{authModule:Rt,requestModule:xt}});var It;(function(e){e["Home"]="Home",e["Help"]="Help",e["Auth"]="Auth",e["Registration"]="Registration",e["Request"]="Request"})(It||(It={}));var Kt=[{path:"/",name:It.Home,component:$e,meta:{layout:"main",auth:!0}},{path:"/help",name:It.Help,component:tt,meta:{layout:"main",auth:!0}},{path:"/auth",name:It.Auth,component:mt,meta:{layout:"auth",auth:!1}},{path:"/registration",name:It.Registration,component:Mt,meta:{layout:"auth",auth:!1}},{path:"/requests/:id",name:It.Request,component:yt,meta:{layout:"main",auth:!0}}],Qt=(0,o.aE)({history:(0,o.LA)("/"),routes:Kt,linkActiveClass:"active",linkExactActiveClass:"active"});Qt.beforeEach(function(e,t,n){var r=e.meta.auth;r&&Vt.getters["authModule/isAuthenticated"]?n():r&&!Vt.getters["authModule/isAuthenticated"]?n("/registration?message=auth"):n()});const Ut=Qt;(0,r.Ef)(V).use(Vt).use(Ut).mount("#app")}},t={};function n(r){var u=t[r];if(void 0!==u)return u.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,u,a)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,u,a]=e[c],s=!0,i=0;i<r.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every(e=>n.O[e](r[i]))?r.splice(i--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var l=u();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,u,a]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var u,a,[o,s,i]=r,l=0;if(o.some(t=>0!==e[t])){for(u in s)n.o(s,u)&&(n.m[u]=s[u]);if(i)var c=i(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkvue_practice_app"]=self["webpackChunkvue_practice_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],()=>n(2979));r=n.O(r)})();
//# sourceMappingURL=app.97a4499e.js.map